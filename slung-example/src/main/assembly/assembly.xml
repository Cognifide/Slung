<assembly xmlns="http://maven.apache.org/plugins/maven-assembly-plugin/assembly/1.1.2" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/plugins/maven-assembly-plugin/assembly/1.1.2 http://maven.apache.org/xsd/assembly-1.1.2.xsd">
  <id>example</id>

  <formats>
    <format>zip</format>
  </formats>

  <includeBaseDirectory>false</includeBaseDirectory>

  <fileSets>
    <fileSet>
      <directory>src/main/aem/jcr_root</directory>
      <outputDirectory>jcr_root</outputDirectory>
      <excludes>
        <exclude>**/.vlt</exclude>
        <exclude>/libs/**</exclude>
        <exclude>/WEB-INF/**</exclude>
      </excludes>
    </fileSet>
    <fileSet>
      <directory>src/main/aem/META-INF/vault</directory>
      <outputDirectory>META-INF/vault</outputDirectory>
      <filtered>false</filtered>
      <excludes>
        <exclude>properties.xml</exclude>
      </excludes>
    </fileSet>
    <fileSet>
      <directory>src/main/aem/META-INF/vault</directory>
      <outputDirectory>META-INF/vault</outputDirectory>
      <filtered>true</filtered>
      <includes>
        <include>properties.xml</include>
      </includes>
    </fileSet>
    <fileSet>
      <directory>${project.build.directory}</directory>
      <outputDirectory>jcr_root/apps/slung/install</outputDirectory>
      <includes>
        <include>*.jar</include>
      </includes>
    </fileSet>
  </fileSets>

  <dependencySets>
    <dependencySet>
      <includes>
        <include>com.cognifide.slung:slung</include>
        <include>com.cognifide.slung:slung-api</include>
        <include>com.cognifide.slung:slung-implementation</include>
        <include>com.cognifide.slung:slung-filter</include>
        <include>com.cognifide.slung:slung-manual</include>
        <include>com.cognifide.slung:slung-slice</include>
        <include>com.cognifide.slung:slung-sling-models</include>
      </includes>
      <scope>provided</scope>
      <outputDirectory>jcr_root/apps/slung/install</outputDirectory>
    </dependencySet>
    <dependencySet>
      <includes>
        <include>javax.inject:com.springsource.javax.inject</include>
        <include>org.aopalliance:com.springsource.org.aopalliance</include>
        <include>com.google.inject:guice</include>
        <include>org.ops4j:peaberry</include>
        <include>com.cognifide.slice:slice-core</include>
        <include>com.cognifide.slice:slice-core-api</include>
        <include>com.cognifide.slice:slice-mapper</include>
        <include>com.cognifide.slice:slice-mapper-api</include>
      </includes>
      <scope>provided</scope>
      <outputDirectory>jcr_root/apps/slice/install</outputDirectory>
    </dependencySet>
    <dependencySet>
      <includes>
        <include>com.cognifide.slice-addon:slice-aem60</include>
      </includes>
      <scope>provided</scope>
      <outputDirectory>jcr_root/apps/slice-addon/install</outputDirectory>
    </dependencySet>
    <dependencySet>
      <includes>
        <include>org.apache.sling:org.apache.sling.models.api</include>
        <include>org.apache.sling:org.apache.sling.models.impl</include>
      </includes>
      <scope>provided</scope>
      <outputDirectory>jcr_root/apps/sling-models/install</outputDirectory>
    </dependencySet>
  </dependencySets>
</assembly>
